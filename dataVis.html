<html>
	<head>
		<link rel = "stylesheet" type = "text/css" href = "dataVis.css">
		<title>Data Vis</title>
	</head>
	<body>
		<?php
			$teamNumber = $_POST['teamNumber'];
			$host = "localhost";
			$user = "root";
			$pass = "team868!";
			$dbname = "techHounds";
			$link = new mysqli($host,$user,$pass,$dbname);
			if($link->connect_errno) {
				echo "Connection failed: " . $link->connect_error;
			}
			$query = "SELECT * FROM generic WHERE teamNumber='" . $teamNumber . "';";
			$result = $link->query($query);
			
			if ($result) {
        	// The `$arrData` array holds the chart attributes and data
        	$arrData = array(
        	    "chart" => array(
                  "caption" => "Top 10 Most Populous Countries",
                  "showValues" => "0",
                  "theme" => "ocean"
              	)
           	);

        	$arrData["data"] = array();
			$count = 1;
        	while($row = mysqli_fetch_array($result)) {
				array_push($arrData["data"], array(
					"label" => $count,
					"value" => "whatever we track over time"
					)
				);
				$count++;
        	}

        	/*JSON Encode the data to retrieve the string containing the JSON representation of the data in the array. */

        	$jsonEncodedData = json_encode($arrData);

			/*Create an object for the column chart using the FusionCharts PHP class constructor. Syntax for the constructor is ` FusionCharts("type of chart", "unique chart id", width of the chart, height of the chart, "div id to render the chart", "data format", "data source")`. Because we are using JSON data to render the chart, the data format will be `json`. The variable `$jsonEncodeData` holds all the JSON data for the chart, and will be passed as the value for the data source parameter of the constructor.*/

        	$columnChart = new FusionCharts("column2D", "myFirstChart" , 600, 300, "chart-1", "json", $jsonEncodedData);

        	// Render the chart
        	$columnChart->render();
		?>
		<h1>Data Visualization</h1>
		<form method = "post">
			<input type = "number" placeholder = "868" name = "teamNumber">
			<input type = "submit" value = "submit">			
		</form>
		<div id = "chart"></div>
	</body>
</html>